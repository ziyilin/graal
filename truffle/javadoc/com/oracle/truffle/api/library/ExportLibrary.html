<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>ExportLibrary (GraalVM Truffle Java API Reference)</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ExportLibrary (GraalVM Truffle Java API Reference)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>GraalVM Truffle Java API Reference<br>1.0.0-rc17-dev</b><br>097cf1229cc9d009f26ef86f587b6d2fbaf899c0</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/oracle/truffle/api/library/DynamicDispatchLibrary.html" title="class in com.oracle.truffle.api.library"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/oracle/truffle/api/library/ExportLibrary.Repeat.html" title="annotation in com.oracle.truffle.api.library"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/oracle/truffle/api/library/ExportLibrary.html" target="_top">Frames</a></li>
<li><a href="ExportLibrary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.required.element.summary">Required</a>&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.oracle.truffle.api.library</div>
<h2 title="Annotation Type ExportLibrary" class="title">Annotation Type ExportLibrary</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Retention.html?is-external=true" title="class or interface in java.lang.annotation">@Retention</a>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Retention.html?is-external=true#value--" title="class or interface in java.lang.annotation">value</a>=<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/RetentionPolicy.html?is-external=true#RUNTIME" title="class or interface in java.lang.annotation">RUNTIME</a>)
 <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Target.html?is-external=true" title="class or interface in java.lang.annotation">@Target</a>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Target.html?is-external=true#value--" title="class or interface in java.lang.annotation">value</a>=<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/ElementType.html?is-external=true#TYPE" title="class or interface in java.lang.annotation">TYPE</a>)
 <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Repeatable.html?is-external=true" title="class or interface in java.lang.annotation">@Repeatable</a>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Repeatable.html?is-external=true#value--" title="class or interface in java.lang.annotation">value</a>=<a href="../../../../../com/oracle/truffle/api/library/ExportLibrary.Repeat.html" title="annotation in com.oracle.truffle.api.library">ExportLibrary.Repeat.class</a>)
public @interface <span class="memberNameLabel">ExportLibrary</span></pre>
<div class="block">Allows to export messages of Truffle libraries. The exported library <a href="../../../../../com/oracle/truffle/api/library/ExportLibrary.html#value--"><code>value</code></a> specifies the library class that is exported. If there are abstract methods specified by a
 library then those messages need to be implemented. A receiver may export multiple libraries at
 the same time, by specifying multiple export annotations. Subclasses of the receiver type inherit
 all exported messages and may also be exported again. In this case the subclass overrides the
 base class export.

 <h3>Method Exports</h3>

 Messages are exported by specifying methods annotated by
 <a href="../../../../../com/oracle/truffle/api/library/ExportMessage.html" title="annotation in com.oracle.truffle.api.library">@ExportMessage</a> that match the name and signature of a library message.
 By default the message name is inferred by the method name and the library is automatically
 detected if it can be unambiguously identified by its simple name. If the receiver type is
 implicit then the receiver type parameter can be omitted. Exported messages allow the use of
 <a href="../../../../../com/oracle/truffle/api/dsl/Cached.html" title="annotation in com.oracle.truffle.api.dsl">Cached</a>, <a href="../../../../../com/oracle/truffle/api/library/CachedLibrary.html" title="annotation in com.oracle.truffle.api.library">CachedLibrary</a>, <a href="../../../../../com/oracle/truffle/api/dsl/CachedContext.html" title="annotation in com.oracle.truffle.api.dsl">CachedContext</a> and
 <a href="../../../../../com/oracle/truffle/api/dsl/CachedLanguage.html" title="annotation in com.oracle.truffle.api.dsl">CachedLanguage</a> parameters at the end of the method. This allows the use of nodes in
 implementations.

 <p>
 <h4>Usage example</h4>

 Example usage with implicit receiver type:

 <pre>
 &#64;ExportLibrary(ArrayLibrary.class)
 static final class BufferArray {

     private int length;
     private int[] buffer;

     BufferArray(int length) {
         this.length = length;
         this.buffer = new int[length];
     }

     &#64;ExportMessage
     boolean isArray() {
         return true;
     }

     &#64;ExportMessage
     int read(int index) {
         return buffer[index];
     }
 }
 </pre>

 <h3>Class exports</h3>

 If a message export requires more than one <a href="../../../../../com/oracle/truffle/api/dsl/Specialization.html" title="annotation in com.oracle.truffle.api.dsl"><code>specialization</code></a> then the export
 must be specified as class. In this case the simple name of the message is resolved by using the
 class name and turning the first character lower-case. So for an exported class named
 <code>Read</code> the message <code>read</code> would be used. It is not allowed to use a method
 export and a class export for the same message at the same time. Multiple <a href="../../../../../com/oracle/truffle/api/library/ExportMessage.html" title="annotation in com.oracle.truffle.api.library"><code>ExportMessage</code></a>
 annotations may be used for the same method or class to export them for multiple messages. In
 this case the <a href="../../../../../com/oracle/truffle/api/library/ExportMessage.html#name--"><code>message name</code></a> needs to be specified explicitly and the
 target signatures need to match for all exported messages.

 <p>
 <h4>Usage example</h4>

 <pre>
 &#64;ExportLibrary(value = ArrayLibrary.class)
 static final class SequenceArray {

     final int start;
     final int stride;
     final int length;

     SequenceArray(int start, int stride, int length) {
         this.start = start;
         this.stride = stride;
         this.length = length;
     }

     &#64;ExportMessage
     boolean isArray() {
         return true;
     }

     &#64;ExportMessage
     static class Read {
         &#64;Specialization(guards = {"seq.stride == cachedStride",
                         "seq.start  == cachedStart"}, limit = "1")
         static int doSequenceCached(SequenceArray seq, int index,
                         &#64;Cached("seq.start") int cachedStart,
                         &#64;Cached("seq.stride") int cachedStride) {
             return cachedStart + cachedStride * index;
         }

         &#64;Specialization(replaces = "doSequenceCached")
         static int doSequence(SequenceArray seq, int index) {
             return doSequenceCached(seq, index, seq.start, seq.stride);
         }
     }
 }
 </pre>

 <h3>Explicit Receiver Types</h3>

 For <a href="../../../../../com/oracle/truffle/api/library/GenerateLibrary.DefaultExport.html" title="annotation in com.oracle.truffle.api.library"><code>default exports</code></a> or types that support <a href="../../../../../com/oracle/truffle/api/library/DynamicDispatchLibrary.html" title="class in com.oracle.truffle.api.library"><code>dynamic dispatch</code></a> the export may declare an <a href="../../../../../com/oracle/truffle/api/library/ExportLibrary.html#receiverType--"><code>explicit receiver type</code></a>.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.0</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../com/oracle/truffle/api/library/GenerateLibrary.html" title="annotation in com.oracle.truffle.api.library"><code>GenerateLibrary</code></a>, 
<a href="../../../../../com/oracle/truffle/api/library/CachedLibrary.html" title="annotation in com.oracle.truffle.api.library"><code>CachedLibrary</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== ANNOTATION TYPE REQUIRED MEMBER SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation.type.required.element.summary">
<!--   -->
</a>
<h3>Required Element Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Required Element Summary table, listing required elements, and an explanation">
<caption><span>Required Elements</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Required Element and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;? extends <a href="../../../../../com/oracle/truffle/api/library/Library.html" title="class in com.oracle.truffle.api.library">Library</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/api/library/ExportLibrary.html#value--">value</a></span></code>
<div class="block">The library class that specifies the messages that are exported.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== ANNOTATION TYPE OPTIONAL MEMBER SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation.type.optional.element.summary">
<!--   -->
</a>
<h3>Optional Element Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Optional Element Summary table, listing optional elements, and an explanation">
<caption><span>Optional Elements</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Optional Element and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;?&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/api/library/ExportLibrary.html#receiverType--">receiverType</a></span></code>
<div class="block">The explicit receiver type to use if specified.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation.type.element.detail">
<!--   -->
</a>
<h3>Element Detail</h3>
<a name="value--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>value</h4>
<pre>public abstract&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;? extends <a href="../../../../../com/oracle/truffle/api/library/Library.html" title="class in com.oracle.truffle.api.library">Library</a>&gt;&nbsp;value</pre>
<div class="block">The library class that specifies the messages that are exported.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.0</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="receiverType--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>receiverType</h4>
<pre>public abstract&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;?&gt;&nbsp;receiverType</pre>
<div class="block">The explicit receiver type to use if specified. This is useful to specifying the receiver
 type for <a href="../../../../../com/oracle/truffle/api/library/GenerateLibrary.DefaultExport.html" title="annotation in com.oracle.truffle.api.library"><code>default exports</code></a> or types that are
 <a href="../../../../../com/oracle/truffle/api/library/DynamicDispatchLibrary.html" title="class in com.oracle.truffle.api.library"><code>dynamically dispatched</code></a>. If specified, all exported methods
 need to be declared statically with the receiver type argument as first parameter.

 <h4>Usage example</h4>

 <pre>
 &#64;ExportLibrary(value = ArrayLibrary.class, receiverType = Integer.class)
 static final class ScalarIntegerArray {

     &#64;ExportMessage
     static boolean isArray(Integer receiver) {
         return true;
     }

     &#64;ExportMessage
     int read(Integer receiver, int index) {
         if (index == 0) {
             return receiver;
         } else {
             throw new ArrayIndexOutOfBoundsException(index);
         }
     }
 }
 </pre></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.0</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>java.lang.Void.class</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>GraalVM Truffle Java API Reference<br>1.0.0-rc17-dev</b><br>097cf1229cc9d009f26ef86f587b6d2fbaf899c0</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/oracle/truffle/api/library/DynamicDispatchLibrary.html" title="class in com.oracle.truffle.api.library"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/oracle/truffle/api/library/ExportLibrary.Repeat.html" title="annotation in com.oracle.truffle.api.library"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/oracle/truffle/api/library/ExportLibrary.html" target="_top">Frames</a></li>
<li><a href="ExportLibrary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.required.element.summary">Required</a>&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><center>Copyright &copy; 2012, 2019, Oracle and/or its affiliates. All rights reserved.</center></small></p>
</body>
</html>
